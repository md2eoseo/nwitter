(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{32:function(e,t,a){e.exports=a(50)},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),u=a(3),o=a(18),i=a(2),s=a(17);a(37),a(39),a(51);s.initializeApp({apiKey:"AIzaSyBQbMXaA6WRvSC1U9TgVrxFvOIPXhryePk",authDomain:"nwitter-4645b.firebaseapp.com",databaseURL:"https://nwitter-4645b.firebaseio.com",projectId:"nwitter-4645b",storageBucket:"nwitter-4645b.appspot.com",messagingSenderId:"424703123399",appId:"1:424703123399:web:d78269832be0a0862943e2"});var m=s,p=s.auth(),f=s.firestore(),d=s.storage(),b=a(6),h=a(16),E=a(12),v=function(e){var t=e.userObj;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"navigator"},r.a.createElement("li",null,r.a.createElement(o.b,{className:"nav_home",exact:!0,to:"/"},r.a.createElement(b.a,{icon:h.c,color:"#04AAFF",size:"2x"}))),r.a.createElement("li",null,r.a.createElement(o.b,{className:"nav_profile",exact:!0,to:"/profile"},r.a.createElement(b.a,{icon:E.e,color:"#04AAFF",size:"2x"}),r.a.createElement("span",{className:"nav_profile_span"},t?"".concat(t.displayName):"Profile"))),r.a.createElement("li",null,r.a.createElement("span",{className:"formBtn cancelBtn logOut",onClick:function(){p.signOut()}},"Logout"))))},w=a(5),g=a.n(w),O=a(11),j=function(e){e.error;var t=e.setError,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),h=b[0],E=b[1],v=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?o(n):"password"===a&&f(n)},w=function(){var e=Object(O.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!h){e.next=6;break}return e.next=4,p.createUserWithEmailAndPassword(l,m).catch((function(e){t(e.message)}));case 4:e.next=8;break;case 6:return e.next=8,p.signInWithEmailAndPassword(l,m).catch((function(e){t(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"container",onSubmit:w},r.a.createElement("input",{className:"authInput",name:"email",type:"text",placeholder:"Email",required:!0,value:l,onChange:v}),r.a.createElement("input",{className:"authInput",name:"password",type:"password",placeholder:"Pasword",required:!0,value:m,onChange:v}),r.a.createElement("input",{className:"authInput authSubmit",type:"submit",value:h?"Sign up":"Login"}),r.a.createElement("span",{className:"authSwitch",onClick:function(){E(!h),t("")}},h?"I have a account":"I don't have a account"))},x=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=function(e){var t,a=e.target.name;"google"===a?t=new m.auth.GoogleAuthProvider:"github"===a&&(t=new m.auth.GithubAuthProvider),p.signInWithPopup(t).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&c("The account already exists with same email. Try another login method.")}))};return r.a.createElement("div",{className:"authContainer"},r.a.createElement(b.a,{icon:h.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),r.a.createElement(j,{error:a,setError:c}),a&&r.a.createElement("span",{className:"authError"},a),r.a.createElement("div",{className:"authBtns"},r.a.createElement("button",{onClick:l,name:"google",className:"authBtn"},"Continue with Google ",r.a.createElement(b.a,{icon:h.b})),r.a.createElement("button",{onClick:l,name:"github",className:"authBtn"},"Continue with Github ",r.a.createElement(b.a,{icon:h.a}))))},N=a(53),y=function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(null),s=Object(u.a)(i,2),m=s[0],p=s[1],h=function(){var e=Object(O.a)(g.a.mark((function e(a){var n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,""===l){e.next=16;break}if(n={text:l,creatorId:t.uid,createdAt:Date.now(),attachmentUrl:null},null===m){e.next=12;break}return r=d.ref().child("".concat(t.uid,"/").concat(Object(N.a)())),e.next=8,r.putString(m,"data_url");case 8:return c=e.sent,e.next=11,c.ref.getDownloadURL();case 11:n.attachmentUrl=e.sent;case 12:return e.next=14,f.collection("nweets").add(n).then((function(){o(""),p(null)}));case 14:e.next=17;break;case 16:console.log("Nweet is empty!");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0.code);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"factoryForm",onSubmit:h},r.a.createElement("div",{className:"factoryInput__container"},r.a.createElement("input",{className:"factoryInput__input",value:l,onChange:function(e){var t=e.target.value;o(t)},placeholder:"Nweet your thoughts...",maxLength:120}),r.a.createElement("input",{className:"formFileInput",id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(e){p(e.target.result)}}}),r.a.createElement("input",{value:"\u2192",className:"factoryInput__arrow",type:"submit"})),r.a.createElement("label",{for:"attach-file",className:"factoryInput__label"},r.a.createElement("span",null,"Add photos"),r.a.createElement(b.a,{icon:E.b})),m&&r.a.createElement("div",{className:"factoryForm__attachment"},r.a.createElement("img",{src:m,alt:"attachment",style:{backgroundImage:m}}),r.a.createElement("div",{className:"factoryForm__clear",onClick:function(){p(null)}},r.a.createElement("span",null,"Remove"),r.a.createElement(b.a,{icon:E.c}))))},k=a(20),S=function(e){var t=e.nweet,a=e.isOwner,c=Object(n.useState)(!1),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(t.text),m=Object(u.a)(s,2),p=m[0],h=m[1],v=function(){i(!o),h(t.text)},w=function(){var e=Object(O.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,""===p){e.next=7;break}return e.next=5,f.doc("nweets/".concat(t.id)).update({text:p,updatedAt:Date.now()}).then((function(){v()}));case 5:e.next=8;break;case 7:console.log("can't make Nweet empty!");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.code);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to delete Nweet?")){e.next=7;break}if(null===t.attachmentUrl){e.next=5;break}return e.next=5,d.refFromURL(t.attachmentUrl).delete();case 5:return e.next=7,f.doc("nweets/".concat(t.id)).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"nweet"},o?r.a.createElement("form",{className:"container nweetEdit",onSubmit:w},r.a.createElement("input",{className:"formInput",placeholder:"Edit your nweet...",value:p,onChange:function(e){var t=e.target.value;h(t)},maxLength:120,required:!0,autoFocus:!0}),r.a.createElement("input",{className:"formBtn",type:"submit",value:"edit"}),r.a.createElement("button",{className:"formBtn cancelBtn",onClick:v},"cancel")):r.a.createElement("div",null,t.attachmentUrl&&r.a.createElement("img",{src:t.attachmentUrl,alt:"nweet.attachmentUrl"}),r.a.createElement("span",null,t.text),t.updatedAt&&r.a.createElement("span",null,"-edited")),a&&!o&&r.a.createElement("div",{class:"nweet__actions"},r.a.createElement("span",{onClick:j},r.a.createElement(b.a,{icon:E.d})),r.a.createElement("span",{onClick:v},r.a.createElement(b.a,{icon:E.a}))))},I=function(e){var t=e.userObj,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){f.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));o(t)}))}),[]),r.a.createElement("div",{className:"feed"},l.map((function(e){return r.a.createElement(S,{key:e.id,nweet:e,isOwner:t.uid===e.creatorId})})))},A=function(e){var t=e.userObj;return r.a.createElement("div",{className:"container"},r.a.createElement(y,{userObj:t}),r.a.createElement(I,{userObj:t}))},C=function(e){var t=e.userObj,a=e.refreshUser,c=Object(n.useState)([]),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(t.displayName),m=Object(u.a)(s,2),p=m[0],d=m[1],b=function(){var e=Object(O.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("nweets").where("creatorId","==",t.uid).orderBy("createdAt").get();case 2:a=e.sent,i(a.docs.map((function(e){return Object(k.a)({id:e.id},e.data())})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){b()}));var h=function(){var e=Object(O.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===p){e.next=5;break}return e.next=4,t.updateProfile({displayName:p});case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:h,className:"profileForm"},r.a.createElement("input",{className:"formInput",onChange:function(e){var t=e.target.value;d(t)},type:"text",placeholder:"Display name",value:p,autoFocus:!0}),r.a.createElement("input",{className:"formBtn",style:{marginTop:10},type:"submit",value:"Update Profile"})),r.a.createElement("div",null,o.length>0?o.map((function(e){return r.a.createElement(S,{key:e.id,nweet:e,isOwner:t.uid===e.creatorId})})):"There's no Nweet..."))},F=function(e){var t=e.isLoggedIn,a=e.userObj,n=e.refreshUser;return r.a.createElement(o.a,null,t&&r.a.createElement(v,{userObj:a}),r.a.createElement(i.d,null,t?r.a.createElement("div",{className:"router"},r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(A,{userObj:a})),r.a.createElement(i.b,{exact:!0,path:"/profile"},r.a.createElement(C,{userObj:a,refreshUser:n})),r.a.createElement(i.a,{from:"*",to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(x,null)),r.a.createElement(i.a,{from:"*",to:"/"}))))};var U=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)(null),f=Object(u.a)(m,2),d=f[0],b=f[1];return Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){e?(s(!0),b({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):(s(!1),b(null)),c(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(F,{isLoggedIn:i,userObj:d,refreshUser:function(){var e=p.currentUser;b({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}}):"\ud83e\uddc0",r.a.createElement("footer",null,"\xa9 ",(new Date).getFullYear()," Nwitter"))};a(49);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.63016795.chunk.js.map